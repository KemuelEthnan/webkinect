Berikut rangkuman keseluruhan workflow integrasi Ball Pivoting Open3D ke dalam proyek Web Kinect Anda. Disusun formal, jelas, dan terstruktur.

1. Tujuan

Menerapkan rekonstruksi mesh Ball Pivoting (Open3D) ke proyek Web Kinect, dengan pemrosesan mesh dilakukan di server Python karena Open3D tidak dapat dijalankan di browser.

2. Perangkat Lunak yang Dibutuhkan

Python 3.8–3.12

Open3D

pip install open3d


Flask (atau FastAPI)

pip install flask


Numpy

pip install numpy

3. Lingkungan Server

Sistem operasi Windows atau Linux
RAM minimal 4 GB
CPU multi-core
Koneksi jaringan antara frontend dan server

4. Struktur Direktori Server
mesh-server/
├── app.py
├── reconstruct.py
├── uploads/
└── outputs/

5. Tugas Server Python

Menerima point cloud dari browser melalui HTTP POST.
Memproses point cloud menggunakan Ball Pivoting Open3D.
Menghasilkan mesh berformat PLY atau OBJ.
Mengirim kembali file mesh ke browser.

6. Implementasi Server (Ringkas)
from flask import Flask, request, send_file
import open3d as o3d
import numpy as np
import os, uuid

app = Flask(__name__)
os.makedirs("uploads", exist_ok=True)
os.makedirs("outputs", exist_ok=True)

def reconstruct_mesh(input_path, output_path):
    pcd = o3d.io.read_point_cloud(input_path)
    pcd.estimate_normals()
    distances = pcd.compute_nearest_neighbor_distance()
    avg_dist = np.mean(distances)
    radius = avg_dist * 1.5
    mesh = o3d.geometry.TriangleMesh.create_from_point_cloud_ball_pivoting(
        pcd, o3d.utility.DoubleVector([radius, radius * 2])
    )
    o3d.io.write_triangle_mesh(output_path, mesh)

@app.route("/mesh", methods=["POST"])
def mesh():
    file_id = str(uuid.uuid4())
    inp = f"uploads/{file_id}.ply"
    out = f"outputs/{file_id}.ply"

    with open(inp, "wb") as f:
        f.write(request.data)

    reconstruct_mesh(inp, out)
    return send_file(out, mimetype="application/octet-stream")

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)

7. Integrasi Frontend
7.1 Mengirim point cloud ke server
async function sendToMeshServer(plyString) {
    const res = await fetch("http://localhost:5000/mesh", {
        method: "POST",
        headers: { "Content-Type": "application/octet-stream" },
        body: plyString
    });

    const blob = await res.blob();
    const url = URL.createObjectURL(blob);

    const loader = new THREE.PLYLoader();
    loader.load(url, geometry => {
        const material = new THREE.MeshStandardMaterial();
        const mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);
    });
}

8. Tahapan Implementasi Teknis

Backend C# mengirim data Kinect ke browser melalui WebSocket.
Browser menampilkan point cloud dan mengekspornya ke format PLY.
Browser mengirim file PLY ke server Python menggunakan HTTP POST.
Server menjalankan Ball Pivoting dengan Open3D dan menghasilkan mesh.
Server mengirim kembali file mesh ke browser.
Browser memuat mesh menggunakan Three.js (PLYLoader atau OBJLoader).

9. Arsitektur Sistem
Kinect → Server C# (WebSocket)
       → Frontend JavaScript
       → Server Python (Open3D, Ball Pivoting)
       → Mesh PLY/OBJ
       → Three.js Viewer

10. Kelebihan dan Kekurangan

Kelebihan

Mesh lebih mendekati bentuk tubuh.
Metode menghasilkan permukaan watertight.
Parameter rekonstruksi fleksibel.

Kekurangan

Tidak real-time.
Membutuhkan server Python untuk pemrosesan.